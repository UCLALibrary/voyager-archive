# SQL Support

This `sql_support` directory is not part of the Django application, but
contains files which support the creation of the database and possibly 
loading of the data.

The application uses a legacy Oracle database, converted to PostgreSQL
by [ora2pg](https://ora2pg.darold.net/documentation.html).  The Django
models are then generated by `manage.py inspectdb`.  Models are all
unmanaged: they will not be used to update the database schema.  Data
will be imported using `ora2pg`.

## Create PostgreSQL tables

```
# Create all application tables in local PostgreSQL database container.
# -T switch disables pseudo-tty allocation, to avoid misleading error `the input device is not a TTY`
docker-compose exec -T db psql -U voyager_archive < sql_support/create_psql_tables.sql
```

